# –≠—Ç–∞–ø —Å–±–æ—Ä–∫–∏
FROM node:18 AS build

# üß∞ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
RUN apt-get update && apt-get install -y openssl python3

WORKDIR /app

COPY package*.json ./
RUN npm install
RUN npm install pinia
RUN npm install axios vue-router

COPY . .
RUN npm run build

# –≠—Ç–∞–ø –∑–∞–ø—É—Å–∫–∞
FROM nginx:alpine AS runtime
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
